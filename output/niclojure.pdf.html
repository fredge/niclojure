<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <title>Clojure for pleasure</title>
    <meta http-equiv="Content-type" content="text/html; charset=utf-8" />
    <link rel="stylesheet" type="text/css" href="../templates/html/layout.css" />
    <link rel="stylesheet" type="text/css" href="../templates/html/syntax.css" />
    <link rel="stylesheet" type="text/css" href="../templates/html/user.css" />
    <meta name="author" content="Nico" />
    <meta name="subject" content="Cool Clojure and how to get started quickly" />
    <meta name="keywords" content="[Your book keywords (comma-separated)]" />
    <meta name="date" content="2012-09-07" />
  </head>
  <body>
    <div class="frontcover container">
      <div>
        <h1>Clojure for pleasure</h1>
        <p class="description">Cool Clojure and how to get started quickly</p>
        <p class="authors">Nico</p>
      </div>
    </div>

    <div class="table-of-contents">
      <h2 class="no-toc">Content</h2>
      <div id="toc">
        <div class="level2 welcome-to-clojure"><a href="#welcome-to-clojure"><span>Welcome to Clojure</span></a></div><div class="level3 clojure"><a href="#clojure"><span>Clojure</span></a></div><div class="level3 leiningen"><a href="#leiningen"><span>Leiningen</span></a></div><div class="level4 search-clojars"><a href="#search-clojars"><span>Search clojars</span></a></div><div class="level4 upload-to-clojars"><a href="#upload-to-clojars"><span>Upload to clojars</span></a></div><div class="level4 examples"><a href="#examples"><span>Examples</span></a></div><div class="level3 jark"><a href="#jark"><span>Jark</span></a></div><div class="level3 pomegrenate"><a href="#pomegrenate"><span>Pomegrenate</span></a></div><div class="level3 scala-integration"><a href="#scala-integration"><span>Scala Integration</span></a></div><div class="level3 existing-leiningen-plugins"><a href="#existing-leiningen-plugins"><span>Existing Leiningen Plugins</span></a></div><div class="level3 writing-your-own-plugin-for-leiningen"><a href="#writing-your-own-plugin-for-leiningen"><span>Writing your own plugin for Leiningen</span></a></div><div class="level2 libraries"><a href="#libraries"><span>Libraries</span></a></div><div class="level3 noir"><a href="#noir"><span>Noir</span></a></div><div class="level3 incanter"><a href="#incanter"><span>Incanter</span></a></div><div class="level3 marginalia"><a href="#marginalia"><span>Marginalia</span></a></div><div class="level3 lacij"><a href="#lacij"><span>Lacij</span></a></div><div class="level3 seesaw"><a href="#seesaw"><span>Seesaw</span></a></div><div class="level3 clj-xpath"><a href="#clj-xpath"><span>clj-xpath</span></a></div><div class="level3 clojure-soup"><a href="#clojure-soup"><span>clojure-soup</span></a></div><div class="level3 enlive"><a href="#enlive"><span>Enlive</span></a></div><div class="level3 docjure"><a href="#docjure"><span>Docjure</span></a></div><div class="level3 postal"><a href="#postal"><span>Postal</span></a></div><div class="level3 korma-and-lobos"><a href="#korma-and-lobos"><span>Korma and Lobos</span></a></div><div class="level3 vaadin"><a href="#vaadin"><span>Vaadin</span></a></div><div class="level3 clj-opennlp"><a href="#clj-opennlp"><span>clj-opennlp</span></a></div><div class="level3 clj-http"><a href="#clj-http"><span>clj-http</span></a></div><div class="level3 cascalog"><a href="#cascalog"><span>Cascalog</span></a></div><div class="level3 aleph"><a href="#aleph"><span>Aleph</span></a></div><div class="level3 lamina"><a href="#lamina"><span>Lamina</span></a></div><div class="level3 conduit"><a href="#conduit"><span>Conduit</span></a></div><div class="level2 processing-opencv-and-imaging"><a href="#processing-opencv-and-imaging"><span>Processing, OpenCV and imaging</span></a></div><div class="level3 quil"><a href="#quil"><span>Quil</span></a></div><div class="level2 opencv-arduino"><a href="#opencv-arduino"><span>OpenCV, Arduino </span></a></div><div class="level3 physics-with-clojure"><a href="#physics-with-clojure"><span>Physics with Clojure</span></a></div><div class="level3 cloduino"><a href="#cloduino"><span>Cloduino</span></a></div><div class="level2 live-music"><a href="#live-music"><span>Live Music</span></a></div><div class="level3 overtone"><a href="#overtone"><span>Overtone</span></a></div><div class="level2 in-the-clouds"><a href="#in-the-clouds"><span>In the Clouds</span></a></div><div class="level3 pallet"><a href="#pallet"><span>Pallet</span></a></div><div class="level3 heroku"><a href="#heroku"><span>Heroku</span></a></div><div class="level3 vmfest"><a href="#vmfest"><span>VMFest</span></a></div>
      </div>
    </div>

    <div id="chapters">
      
  <div class="chapter"><h2 id="welcome-to-clojure">Welcome to Clojure</h2>

<p>This book is about sharing my love for Clojure, why I use it, and why I will keep using it for a fair bit of time. You don't need to be a great IT geek, you just have to start using Clojure. Here we go.</p>

<h3 id="clojure">Clojure</h3>

<p><a href="http://learn-clojure.com/clojure_tutorials.html">http://learn-clojure.com/clojure_tutorials.html</a></p>

<p>I will not go too much into the first steps details, since this is not the aim of this book. There is a completely new online book written by <a href="http://www.unexpected-vortices.com/clojure/brief-beginners-guide/index.html">John</a> that should get all the attention it deserves.</p>

<p>Do not forget to do a few <a href="https://github.com/functional-koans/clojure-koans">clojure koans</a> to make sure the basic and the roots are ok.</p>

<h3 id="leiningen">Leiningen</h3>

<p><a href="https://github.com/technomancy/leiningen">https://github.com/technomancy/leiningen</a></p>

<p>To start using clojure, you actually do not install it. You start by installing Leiningen. Once you have it installed, you should be able to see the following:</p>

<div class="highlight"><pre><span class="o">[</span><span class="no">Niko</span><span class="vi">@Modrzyks</span><span class="o">-</span><span class="no">MacBook</span><span class="o">-</span><span class="no">Pro</span><span class="o">][</span><span class="mi">13</span><span class="p">:</span><span class="mi">44</span><span class="o">][~</span><span class="sr">/projects/</span><span class="o">]</span> <span class="o">%</span> <span class="n">lein</span> 
<span class="no">Leiningen</span> <span class="n">is</span> <span class="n">a</span> <span class="n">tool</span> <span class="k">for</span> <span class="n">working</span> <span class="n">with</span> <span class="no">Clojure</span> <span class="n">projects</span><span class="o">.</span>

<span class="no">Several</span> <span class="n">tasks</span> <span class="n">are</span> <span class="n">available</span><span class="p">:</span>
<span class="n">classpath</span>   <span class="no">Print</span> <span class="n">the</span> <span class="n">classpath</span> <span class="n">of</span> <span class="n">the</span> <span class="n">current</span> <span class="n">project</span><span class="o">.</span>
<span class="n">clean</span>       <span class="no">Remove</span> <span class="n">compiled</span> <span class="k">class</span> <span class="n">files</span> <span class="ow">and</span> <span class="n">jars</span> <span class="n">from</span> <span class="n">project</span><span class="o">.</span>
<span class="n">compile</span>     <span class="no">Compile</span> <span class="no">Clojure</span> <span class="n">source</span> <span class="n">into</span> <span class="o">.</span><span class="n">class</span> <span class="n">files</span><span class="o">.</span>
<span class="n">deploy</span>      <span class="no">Build</span> <span class="n">jar</span> <span class="ow">and</span> <span class="n">deploy</span> <span class="n">to</span> <span class="n">remote</span> <span class="n">repository</span><span class="o">.</span>
<span class="n">deps</span>        <span class="no">Download</span> <span class="ss">:dependencies</span> <span class="ow">and</span> <span class="n">put</span> <span class="n">them</span> <span class="k">in</span> <span class="ss">:library</span><span class="o">-</span><span class="n">path</span><span class="o">.</span>
<span class="n">help</span>        <span class="no">Display</span> <span class="n">a</span> <span class="n">list</span> <span class="n">of</span> <span class="n">tasks</span> <span class="ow">or</span> <span class="n">help</span> <span class="k">for</span> <span class="n">a</span> <span class="n">given</span> <span class="n">task</span><span class="o">.</span>
<span class="n">install</span>     <span class="no">Install</span> <span class="n">current</span> <span class="n">project</span> <span class="ow">or</span> <span class="n">download</span> <span class="n">specified</span> <span class="n">project</span><span class="o">.</span>
<span class="n">interactive</span> <span class="no">Enter</span> <span class="n">an</span> <span class="n">interactive</span> <span class="n">task</span> <span class="n">shell</span><span class="o">.</span> <span class="no">Aliased</span> <span class="n">to</span> <span class="s2">"int"</span><span class="o">.</span>
<span class="n">jar</span>         <span class="no">Package</span> <span class="n">up</span> <span class="n">all</span> <span class="n">the</span> <span class="n">project</span><span class="s1">'s files into a jar file.</span>
<span class="s1">javac       Compile Java source files.</span>
<span class="s1">new         Create a new project skeleton.</span>
<span class="s1">plugin      Manage user-level plugins.</span>
<span class="s1">pom         Write a pom.xml file to disk for Maven interop.</span>
<span class="s1">repl        Start a repl session either with the current project or standalone.</span>
<span class="s1">retest      Run only the test namespaces which failed last time around.</span>
<span class="s1">run         Run the project'</span><span class="n">s</span> <span class="o">-</span><span class="n">main</span> <span class="n">function</span><span class="o">.</span>
<span class="n">search</span>      <span class="no">Search</span> <span class="n">remote</span> <span class="n">maven</span> <span class="n">repositories</span> <span class="k">for</span> <span class="n">matching</span> <span class="n">jars</span><span class="o">.</span>
<span class="nb">test</span>        <span class="no">Run</span> <span class="n">the</span> <span class="n">project</span><span class="s1">'s tests.</span>
<span class="s1">test!       Run a project'</span><span class="n">s</span> <span class="n">tests</span> <span class="n">after</span> <span class="n">cleaning</span> <span class="ow">and</span> <span class="n">fetching</span> <span class="n">dependencies</span><span class="o">.</span>
<span class="n">trampoline</span>  <span class="no">Run</span> <span class="n">a</span> <span class="n">task</span> <span class="n">without</span> <span class="n">nesting</span> <span class="n">the</span> <span class="n">project</span><span class="s1">'s JVM inside Leiningen'</span><span class="n">s</span><span class="o">.</span>
<span class="n">uberjar</span>     <span class="no">Package</span> <span class="n">up</span> <span class="n">the</span> <span class="n">project</span> <span class="n">files</span> <span class="ow">and</span> <span class="n">all</span> <span class="n">dependencies</span> <span class="n">into</span> <span class="n">a</span> <span class="n">jar</span> <span class="n">file</span><span class="o">.</span>
<span class="n">upgrade</span>     
<span class="n">version</span>     <span class="no">Print</span> <span class="n">version</span> <span class="k">for</span> <span class="no">Leiningen</span> <span class="ow">and</span> <span class="n">the</span> <span class="n">current</span> <span class="no">JVM</span><span class="o">.</span>

<span class="no">Run</span> <span class="n">lein</span> <span class="n">help</span> <span class="vg">$TASK</span> <span class="k">for</span> <span class="n">details</span><span class="o">.</span>
<span class="no">See</span> <span class="n">also</span><span class="p">:</span> <span class="n">readme</span><span class="p">,</span> <span class="n">tutorial</span><span class="p">,</span> <span class="n">copying</span><span class="p">,</span> <span class="n">sample</span><span class="p">,</span> <span class="n">deploying</span> <span class="ow">and</span> <span class="n">news</span><span class="o">.</span>
</pre>
</div>


<p>Now if you just want to start using some live clojure, you just go with:</p>

<div class="highlight"><pre><span class="o">[</span><span class="no">Niko</span><span class="vi">@Modrzyks</span><span class="o">-</span><span class="no">MacBook</span><span class="o">-</span><span class="no">Pro</span><span class="o">][</span><span class="mi">13</span><span class="p">:</span><span class="mi">50</span><span class="o">][~</span><span class="sr">/] % lein repl</span>
<span class="sr">REPL started; server listening on localhost port 27991</span>
<span class="sr">user=&gt; </span>
</pre>
</div>


<p>And there you are. Was simple no ?</p>

<p>And here is your mother of them all hello world</p>

<div class="highlight"><pre><span class="p">;</span> <span class="n">yes</span> <span class="n">indeed</span>
<span class="p">(</span><span class="n">println</span> <span class="s2">"hello clojure!"</span><span class="p">)</span>

<span class="p">;</span> <span class="kp">include</span> <span class="n">a</span> <span class="kp">new</span> <span class="n">namespace</span> <span class="k">in</span> <span class="n">the</span> <span class="n">current</span> <span class="n">namespace</span>
<span class="p">;</span> <span class="ow">and</span> <span class="n">use</span> <span class="n">a</span> <span class="n">custom</span> <span class="nb">name</span>
<span class="p">(</span><span class="nb">require</span> <span class="err">'</span><span class="o">[</span><span class="n">clojure</span><span class="o">.</span><span class="n">string</span> <span class="ss">:as</span> <span class="n">string</span><span class="o">]</span><span class="p">)</span>

<span class="p">;</span> <span class="n">use</span> <span class="n">the</span> <span class="n">newly</span> <span class="n">imported</span> <span class="n">namespace</span>
<span class="p">(</span><span class="k">def</span> <span class="nf">new_string</span> <span class="p">(</span><span class="n">string</span><span class="o">/</span><span class="n">replace</span> <span class="s2">"Hello World"</span> <span class="s2">"World"</span> <span class="s2">"Nico"</span><span class="p">))</span>

<span class="p">;</span> <span class="nb">print</span>
<span class="p">(</span><span class="n">println</span> <span class="n">new_string</span><span class="p">)</span>
</pre>
</div>


<p>Now you have to realize that all the libs available to the Java World through Maven repositories, and all the libs hosted on Clojars can be integrated in the project in no time by using the command:</p>

<p><em>lein deps</em></p>

<p>The libraries will come to your local project folder. Let's hack in no time.</p>

<h4 id="search-clojars">Search clojars</h4>

<p>To search a library online, use the following syntax:
<code></code></p>

<pre><code>lein search &lt;libraryname&gt;
</code></pre>

<p></p>

<p>For example
<code></code></p>

<pre><code>lein search jsoup     
</code></pre>

<p>
will return</p>

<p><code>
 == Results from clojars - Showing page 1 / 1 total
[org.clojars.clizzin/jsoup "1.5.1"] jsoup HTML parser
</code></p>

<h4 id="upload-to-clojars">Upload to clojars</h4>

<p>There is a plugin called <a href="https://github.com/ato/lein-clojars">lein-clojars</a></p>

<p>You install it somehow like this:
<code></code></p>

<pre><code>lein plugin install lein-clojars 0.9.1
</code></pre>

<p></p>

<p>Then in a clojure project, just go and upload it with
<code></code></p>

<pre><code>lein push
</code></pre>

<p>
Nothing else.</p>

<p>Then a lein search will (should) show it.</p>

<h4 id="examples">Examples</h4>

<p>All the examples in this book can be run with:
<code>
(use 'clojure.string)
(load-file "code/18_clojure_soup.clj")
</code></p>

<p>If you can not run them, let me know ;)</p>

<h3 id="jark">Jark</h3>

<p><a href="http://icylisper.in/jark/started.html">http://icylisper.in/jark/started.html</a></p>

<p>Next you probably going to get tired of the Java VM so very slow startup time. Here comes <a href="https://github.com/clojure/tools.nrepl">nrepl</a> and <a href="http://icylisper.in/jark/features.html">Jark</a></p>

<p>Create a new leiningen project, and follow the jark install steps:</p>

<div class="highlight"><pre><span class="p">;</span> <span class="n">project</span><span class="o">.</span><span class="n">clj</span>
<span class="p">(</span><span class="n">comment</span> 
    <span class="p">;</span> <span class="kp">include</span> <span class="n">this</span> <span class="k">in</span> <span class="n">project</span><span class="o">.</span><span class="n">clj</span>
<span class="p">(</span><span class="n">defproject</span> <span class="n">book01</span> <span class="s2">"1.0.0-SNAPSHOT"</span>
  <span class="ss">:dependencies</span> <span class="o">[</span>
    <span class="o">[</span><span class="n">org</span><span class="o">.</span><span class="n">clojure</span><span class="o">/</span><span class="n">clojure</span> <span class="s2">"1.3.0"</span><span class="o">]</span>
    <span class="o">[</span><span class="n">jark</span> <span class="s2">"0.4.2"</span> <span class="ss">:exclusions</span> <span class="o">[</span><span class="n">org</span><span class="o">.</span><span class="n">clojure</span><span class="o">/</span><span class="n">clojure</span><span class="o">]]</span> 
  <span class="o">]</span><span class="p">))</span>

<span class="p">;</span> <span class="n">now</span> <span class="n">let</span><span class="s1">'s start the embedded repl</span>
<span class="s1">(require '</span><span class="o">[</span><span class="n">clojure</span><span class="o">.</span><span class="n">tools</span><span class="o">.</span><span class="n">nrepl</span> <span class="ss">:as</span> <span class="n">nrepl</span><span class="o">]</span><span class="p">)</span>
<span class="p">(</span><span class="n">nrepl</span><span class="o">/</span><span class="n">start</span><span class="o">-</span><span class="n">server</span> <span class="mi">9000</span><span class="p">)</span>
</pre>
</div>


<p>and then start the repl with the new code from core.clj</p>

<div class="highlight"><pre><span class="o">[</span><span class="no">Niko</span><span class="vi">@Modrzyks</span><span class="o">-</span><span class="no">MacBook</span><span class="o">-</span><span class="no">Pro</span><span class="o">][</span><span class="mi">14</span><span class="p">:</span><span class="mi">11</span><span class="o">][~</span><span class="sr">/projects/</span><span class="n">book01</span><span class="o">/]</span> <span class="o">%</span> <span class="n">lein</span> <span class="n">repl</span>
<span class="no">REPL</span> <span class="n">started</span><span class="p">;</span> <span class="n">server</span> <span class="n">listening</span> <span class="n">on</span> <span class="n">localhost</span> <span class="n">port</span> <span class="mi">42326</span>
<span class="n">user</span><span class="o">=&gt;</span> <span class="p">(</span><span class="nb">load</span><span class="o">-</span><span class="n">file</span> <span class="s2">"src/book01/core.clj"</span><span class="p">)</span>
</pre>
</div>


<p>And now straight from the shell you can use and run remote clojure code</p>

<div class="highlight"><pre><span class="o">[</span><span class="no">Niko</span><span class="vi">@Modrzyks</span><span class="o">-</span><span class="no">MacBook</span><span class="o">-</span><span class="no">Pro</span><span class="o">][</span><span class="mi">14</span><span class="p">:</span><span class="mi">16</span><span class="o">][~</span><span class="sr">/Downloads/</span><span class="n">jark</span><span class="o">-</span><span class="mi">0</span><span class="o">.</span><span class="mi">4</span><span class="o">.</span><span class="mi">2</span><span class="o">-</span><span class="no">Darwin</span><span class="o">-</span><span class="n">x86_64</span><span class="o">/]</span> <span class="o">%</span> <span class="n">jark</span> <span class="o">-</span><span class="n">e</span> <span class="s2">"(+ 2 2)"</span>
<span class="o">=&gt;</span> <span class="mi">4</span>
</pre>
</div>


<p>Now that is some sweet fast starting time, so stop buzzing around.</p>

<h3 id="pomegrenate">Pomegrenate</h3>

<p><a href="https://github.com/cemerick/pomegranate">https://github.com/cemerick/pomegranate</a></p>

<p>This is the best way to add libraries at runtime. You still need the library itself to be available to the repl, by adding this to your <strong>project.clj</strong> file:</p>

<p><code></code></p>

<pre><code>[com.cemerick/pomegranate "0.0.13"]
</code></pre>

<p></p>

<p>Then, here is how to import incanter in a running REPL session:</p>

<div class="highlight"><pre><span class="o">[</span><span class="n">missing</span> <span class="s1">'code/11_pomegranata.clj'</span> <span class="n">file</span><span class="o">]</span>
</pre>
</div>


<h3 id="scala-integration">Scala Integration</h3>

<p>Since every source file in a lein project can be integrated, you can use the <a href="https://github.com/technomancy/lein-scalac">scalac-plugin</a></p>

<p>Here is the HelloWorld.scala file:</p>

<div class="highlight"><pre><span class="sr">//</span> <span class="no">HelloWorld</span><span class="o">.</span><span class="n">scala</span>

<span class="k">class</span> <span class="nc">HelloWorld</span> <span class="p">{</span>
  <span class="k">def</span> <span class="nf">sayHelloToClojure</span><span class="p">(</span><span class="n">msg</span><span class="p">:</span> <span class="nb">String</span><span class="p">)</span> <span class="o">=</span>
    <span class="s2">"Here's the second echo message from Scala: "</span> <span class="n">concat</span> <span class="n">msg</span>
<span class="p">}</span>
</pre>
</div>


<p>and here is how you call it from Clojure</p>

<div class="highlight"><pre><span class="p">(</span><span class="n">import</span> <span class="no">HelloWorld</span><span class="p">)</span>
<span class="p">(</span><span class="o">.</span><span class="n">sayHelloToClojure</span> <span class="p">(</span><span class="no">HelloWorld</span><span class="o">.</span><span class="p">)</span> <span class="s2">"Hi there"</span><span class="p">)</span>
</pre>
</div>


<p>Now you can tell your friend you know more than one language on the JVM. :)</p>

<h3 id="existing-leiningen-plugins">Existing Leiningen Plugins</h3>

<p>This is not the end, Leiningen provides plugins for all your needs. Groovy, Hadoop, ... you name it. It should be in the Leiningen <a href="https://github.com/technomancy/leiningen/wiki/Plugins">plugins list</a></p>

<h3 id="writing-your-own-plugin-for-leiningen">Writing your own plugin for Leiningen</h3>

<p>Now if the above was not enough for your needs, here is how you create a plugin for your repetitive tasks.</p>

<p>Create a file under <em>src/leiningen</em> and add some clojure code:</p>

<div class="highlight"><pre><span class="p">(</span><span class="n">ns</span> <span class="n">leiningen</span><span class="o">.</span><span class="n">todo</span><span class="p">)</span>

<span class="p">(</span><span class="n">defn</span> <span class="n">todo</span> <span class="o">[</span><span class="n">project</span> <span class="o">&amp;</span> <span class="n">args</span><span class="o">]</span> <span class="p">(</span><span class="n">println</span> <span class="s2">"Hello TODO!!"</span><span class="p">))</span>
</pre>
</div>


<p>Then a new task will be available to your current project.</p>

<p>To share the task with other, please have a look at <a href="http://nakkaya.com/2010/02/25/writing-leiningen-plugins-101/">writing leiningen plugins 101/</a></p>


</div>
  <div class="chapter"><h2 id="libraries">Libraries</h2>

<p>Now that we are ready for some hacking, here are sites, that refer interesting Clojure libraries:</p>

<ul><li><a href="http://clojure-libraries.appspot.com/">clojure-libraries on appspot.com/</a></li>
<li><a href="http://clojurewerkz.org/">clojurewerkz</a></li>
<li><a href="http://clojure.github.com/">Clojure on github</a></li>
<li><a href="http://programmers.stackexchange.com/questions/125107/what-are-the-essential-clojure-libraries-to-learn-beyond-the-basics-of-core">http://programmers.stackexchange.com/questions/125107/what-are-the-essential-clojure-libraries-to-learn-beyond-the-basics-of-core</a></li>
<li><a href="http://www.clojure-toolbox.com/">http://www.clojure-toolbox.com/</a></li>
<li><a href="http://twitch.nervestaple.com/2012/01/12/clojure-hbase/">http://twitch.nervestaple.com/2012/01/12/clojure-hbase/</a></li>
</ul><h3 id="noir">Noir</h3>

<p><a href="https://github.com/ibdknox/noir">https://github.com/ibdknox/noir</a>
<a href="http://www.webnoir.org/">http://www.webnoir.org/</a></p>

<p>It's dark in here ! Noir is probably <em>the</em> simplest way to write a functional web application in clojure.</p>

<p>This is how it looks like in Clojure code</p>

<div class="highlight"><pre><span class="p">(</span><span class="n">ns</span> <span class="n">my</span><span class="o">-</span><span class="n">app</span>
  <span class="p">(</span><span class="ss">:use</span> <span class="n">noir</span><span class="o">.</span><span class="n">core</span><span class="p">)</span>
  <span class="p">(</span><span class="ss">:require</span> <span class="o">[</span><span class="n">noir</span><span class="o">.</span><span class="n">server</span> <span class="ss">:as</span> <span class="n">server</span><span class="o">]</span><span class="p">))</span>

<span class="p">(</span><span class="n">defpage</span> <span class="s2">"/welcome"</span> <span class="o">[]</span>
    <span class="s2">"Welcome to Noir!"</span><span class="p">)</span>

<span class="p">(</span><span class="n">server</span><span class="o">/</span><span class="n">start</span> <span class="mi">8080</span><span class="p">)</span>
</pre>
</div>


<p>and/or this is how you would have it started in a few seconds with the leiningen command we installed earlier on</p>

<div class="highlight"><pre><span class="n">lein</span> <span class="n">plugin</span> <span class="n">install</span> <span class="n">lein</span><span class="o">-</span><span class="n">noir</span> <span class="mi">1</span><span class="o">.</span><span class="mi">2</span><span class="o">.</span><span class="mi">1</span>
<span class="n">lein</span> <span class="n">noir</span> <span class="kp">new</span> <span class="n">my</span><span class="o">-</span><span class="n">website</span>
<span class="n">cd</span> <span class="n">my</span><span class="o">-</span><span class="n">website</span>
<span class="n">lein</span> <span class="n">run</span>
</pre>
</div>


<p>Now the guy from Noir has also started a very cute project named <a href="http://app.kodowa.com/playground">Playground</a> where you can do live execution of your code with a nice UI.</p>

<p><img src="../images/LightTable.png" alt="Alt text" /></p>

<h3 id="incanter">Incanter</h3>

<p><a href="http://incanter.org/downloads/">Download</a> and <a href="https://github.com/liebke/incanter/wiki#getstarted">Get started</a></p>

<p>From the Clojure REPL, load the Incanter libraries:</p>

<pre><code>user=&gt; (use '(incanter core stats charts))</code></pre>


<p>Try an example: sample 1,000 values from a standard-normal distribution and view a histogram:</p>

<pre><code>user=&gt; (view (histogram (sample-normal 1000)))</code></pre>


<p><img src="../images/histogram.png" alt="Alt text" /></p>

<h3 id="marginalia">Marginalia</h3>

<p><a href="https://github.com/fogus/marginalia">https://github.com/fogus/marginalia</a></p>

<p>Marginalia is your best literate programming tool for clojure.</p>

<p>Install it as a dependency in your project.clj file:</p>

<p><code></code></p>

<pre><code>:dev-dependencies [lein-marginalia "0.7.1"]
</code></pre>

<p></p>

<p>Then, just use it:
<code></code></p>

<pre><code>lein marg
</code></pre>

<p></p>

<p>And dependending on the amount of comments you wrote in the code, you will get something similar to this:</p>

<p><img src="../images/marginalia.png" alt="Alt text" /></p>

<h3 id="lacij">Lacij</h3>

<p><a href="https://github.com/pallix/lacij">https://github.com/pallix/lacij</a></p>

<p>A library that can quickly create SVG diagram with automatic layout, like this one:</p>

<p><img src="../images/radial.png" alt="SVG" /></p>

<p>Then, a graph can be drawn like this:</p>

<div class="highlight"><pre><span class="p">(</span><span class="n">use</span> <span class="err">'</span><span class="n">lacij</span><span class="o">.</span><span class="n">graph</span><span class="o">.</span><span class="n">svg</span><span class="o">.</span><span class="n">graph</span><span class="p">)</span>

<span class="p">(</span><span class="o">-&gt;</span> <span class="p">(</span><span class="n">create</span><span class="o">-</span><span class="n">graph</span> <span class="ss">:width</span> <span class="mi">800</span> <span class="ss">:height</span> <span class="mi">400</span><span class="p">)</span>
    <span class="p">(</span><span class="n">add</span><span class="o">-</span><span class="n">default</span><span class="o">-</span><span class="n">node</span><span class="o">-</span><span class="n">style</span> <span class="ss">:fill</span> <span class="s2">"lightgreen"</span><span class="p">)</span>
    <span class="p">(</span><span class="n">add</span><span class="o">-</span><span class="n">default</span><span class="o">-</span><span class="n">edge</span><span class="o">-</span><span class="n">style</span> <span class="ss">:stroke</span> <span class="s2">"royalblue"</span><span class="p">)</span>
    <span class="p">(</span><span class="n">add</span><span class="o">-</span><span class="n">node</span> <span class="ss">:hermes</span> <span class="s2">"Hermes"</span> <span class="ss">:x</span> <span class="mi">10</span> <span class="ss">:y</span> <span class="mi">30</span> <span class="ss">:style</span> <span class="p">{</span><span class="ss">:fill</span> <span class="s2">"lightblue"</span><span class="p">})</span>
    <span class="p">(</span><span class="n">add</span><span class="o">-</span><span class="n">node</span> <span class="ss">:zeus</span> <span class="s2">"Zeus"</span> <span class="ss">:x</span> <span class="mi">300</span> <span class="ss">:y</span> <span class="mi">150</span> <span class="ss">:rx</span> <span class="mi">15</span> <span class="ss">:ry</span> <span class="mi">15</span><span class="p">)</span>
    <span class="p">(</span><span class="n">add</span><span class="o">-</span><span class="n">node</span> <span class="ss">:ares</span> <span class="s2">"Ares"</span> <span class="ss">:x</span> <span class="mi">300</span> <span class="ss">:y</span> <span class="mi">250</span> <span class="ss">:style</span> <span class="p">{</span><span class="ss">:fill</span> <span class="s2">"lavender"</span> <span class="ss">:stroke</span> <span class="s2">"red"</span><span class="p">})</span>
    <span class="p">(</span><span class="n">add</span><span class="o">-</span><span class="n">edge</span> <span class="ss">:father1</span> <span class="ss">:hermes</span> <span class="ss">:zeus</span> <span class="s2">"son of"</span>
                <span class="ss">:style</span> <span class="p">{</span><span class="ss">:stroke</span> <span class="s2">"darkcyan"</span> <span class="ss">:stroke</span><span class="o">-</span><span class="n">dasharray</span> <span class="s2">"9, 5"</span><span class="p">})</span>
    <span class="p">(</span><span class="n">add</span><span class="o">-</span><span class="n">edge</span> <span class="ss">:father2</span> <span class="ss">:ares</span> <span class="ss">:zeus</span><span class="p">)</span>
    <span class="p">(</span><span class="n">add</span><span class="o">-</span><span class="n">default</span><span class="o">-</span><span class="n">node</span><span class="o">-</span><span class="n">attrs</span> <span class="ss">:rx</span> <span class="mi">5</span> <span class="ss">:ry</span> <span class="mi">5</span><span class="p">)</span>
    <span class="p">(</span><span class="n">add</span><span class="o">-</span><span class="n">node</span> <span class="ss">:epaphus</span> <span class="s2">"Epaphus"</span> <span class="ss">:x</span> <span class="mi">450</span> <span class="ss">:y</span> <span class="mi">250</span><span class="p">)</span>
    <span class="p">(</span><span class="n">add</span><span class="o">-</span><span class="n">edge</span> <span class="ss">:epaphus</span><span class="o">-</span><span class="n">zeus</span> <span class="ss">:epaphus</span> <span class="ss">:zeus</span><span class="p">)</span>
    <span class="p">(</span><span class="n">add</span><span class="o">-</span><span class="n">node</span> <span class="ss">:perseus</span> <span class="s2">"Perseus"</span> <span class="ss">:x</span> <span class="mi">600</span> <span class="ss">:y</span> <span class="mi">150</span><span class="p">)</span>
    <span class="p">(</span><span class="n">add</span><span class="o">-</span><span class="n">edge</span> <span class="ss">:perseus</span><span class="o">-</span><span class="n">zeus</span> <span class="ss">:perseus</span> <span class="ss">:zeus</span><span class="p">)</span>
    <span class="p">(</span><span class="n">add</span><span class="o">-</span><span class="n">label</span> <span class="ss">:father2</span> <span class="s2">"son of"</span> <span class="ss">:style</span> <span class="p">{</span><span class="ss">:stroke</span> <span class="s2">"crimson"</span>
                                         <span class="ss">:font</span><span class="o">-</span><span class="n">size</span> <span class="s2">"20px"</span>
                                         <span class="ss">:font</span><span class="o">-</span><span class="n">style</span> <span class="s2">"italic"</span><span class="p">})</span>
    <span class="p">(</span><span class="n">build</span><span class="p">)</span>
    <span class="p">(</span><span class="n">export</span> <span class="s2">"styles.svg"</span><span class="p">))</span>
</pre>
</div>


<p>The advantage is that you can add and remove nodes dynamically, thus giving a dynamic view about live typologies.</p>

<h3 id="seesaw">Seesaw</h3>

<p><a href="https://github.com/daveray/seesaw">https://github.com/daveray/seesaw</a></p>

<p>Make cool UIs in no time.</p>

<p>The best tutorial I have found so far is <a href="https://gist.github.com/1441520">here</a></p>

<p>And by trying the example, here is a style you can get after a few lines:</p>

<p><img src="../images/seesaw.png" alt="seesaw" /></p>

<h3 id="clj-xpath">clj-xpath</h3>

<p><a href="https://github.com/kyleburton/clj-xpath">https://github.com/kyleburton/clj-xpath</a></p>

<p>Now you been looking on how to process those xml files as fast as possible, here is a super way to do it, clj-xpath.</p>

<div class="highlight"><pre><span class="p">;</span> <span class="n">import</span> <span class="n">clj</span>
<span class="p">(</span><span class="n">use</span> <span class="err">'</span><span class="n">clj</span><span class="o">-</span><span class="n">xpath</span><span class="o">.</span><span class="n">core</span><span class="p">)</span>

<span class="p">;</span> <span class="n">slurp</span> <span class="n">the</span> <span class="n">remote</span> <span class="n">document</span>
<span class="p">(</span><span class="k">def</span> <span class="nf">xdoc</span> <span class="p">(</span><span class="n">slurp</span> <span class="s2">"http://google-web-toolkit.googlecode.com/svn/trunk/samples/expenses/pom.xml"</span><span class="p">))</span>

<span class="p">;</span> <span class="n">show</span> <span class="n">the</span> <span class="n">top</span> <span class="n">element</span>
<span class="p">(</span><span class="vg">$x</span><span class="ss">:tag</span> <span class="s2">"/*"</span> <span class="n">xdoc</span><span class="p">)</span>

<span class="p">;</span> <span class="n">show</span> <span class="n">the</span> <span class="n">developer</span> <span class="nb">name</span>
<span class="p">(</span><span class="vg">$x</span><span class="ss">:text</span><span class="o">*</span> <span class="s2">"/project/developers/developer/name"</span> <span class="n">xdoc</span><span class="p">)</span>

<span class="p">;</span> <span class="n">describe</span> <span class="n">all</span> <span class="n">the</span> <span class="n">dependencies</span>
<span class="p">(</span><span class="n">doseq</span> <span class="o">[</span><span class="n">node</span> <span class="p">(</span><span class="vg">$x</span> <span class="s2">"/project/dependencies/dependency"</span> <span class="n">xdoc</span><span class="p">)</span><span class="o">]</span>
  <span class="p">(</span><span class="n">prn</span> <span class="p">(</span><span class="nb">format</span> <span class="s2">"%s %s %s"</span>
               <span class="p">(</span><span class="vg">$x</span><span class="ss">:text</span> <span class="s2">"./groupId"</span>    <span class="n">node</span><span class="p">)</span>
               <span class="p">(</span><span class="vg">$x</span><span class="ss">:text</span> <span class="s2">"./artifactId"</span> <span class="n">node</span><span class="p">)</span>
               <span class="p">(</span><span class="vg">$x</span><span class="ss">:text</span> <span class="s2">"./version"</span>    <span class="n">node</span><span class="p">))))</span>
</pre>
</div>


<h3 id="clojure-soup">clojure-soup</h3>

<p><a href="https://github.com/mfornos/clojure-soup">https://github.com/mfornos/clojure-soup</a></p>

<p>This is a wrapper to provide awesome parsing of html files, whether local or remote. Once you have added the library, check out the following example:</p>

<div class="highlight"><pre><span class="p">;</span> <span class="n">start</span> <span class="n">jsoup</span>
<span class="p">(</span><span class="n">use</span> <span class="s1">'jsoup.soup)</span>

<span class="s1">; Get all Emoji names concatenated by single bars from '</span><span class="n">emoji</span><span class="o">-</span><span class="n">cheat</span><span class="o">-</span><span class="n">sheet</span><span class="o">.</span><span class="n">com</span><span class="err">'</span><span class="p">:</span>

<span class="p">(</span><span class="err">$</span> <span class="p">(</span><span class="n">get!</span> <span class="s2">"http://www.emoji-cheat-sheet.com/"</span><span class="p">)</span> 
   <span class="s2">"li div:has(span.emoji)"</span> <span class="p">(</span><span class="n">text</span><span class="p">)</span> 
   <span class="p">(</span><span class="n">map</span> <span class="c1">#(clojure.string/replace % ":" "")) </span>
   <span class="p">(</span><span class="n">clojure</span><span class="o">.</span><span class="n">string</span><span class="o">/</span><span class="n">join</span> <span class="s2">"|"</span><span class="p">))</span> 
</pre>
</div>


<h3 id="enlive">Enlive</h3>

<p><a href="https://github.com/cgrand/enlive">https://github.com/cgrand/enlive</a></p>

<p>HTML parser, and Templating framework at the same time, Enlive does a super job of making HTML fun. (yes you read me.)</p>

<p>This is an example taken from a <a href="https://github.com/swannodette/enlive-tutorial/">slick tutorial</a> by David Nolen.</p>

<div class="highlight"><pre><span class="p">(</span><span class="n">html</span><span class="o">/</span><span class="n">deftemplate</span> <span class="n">index</span> <span class="s2">"tutorial/template1.html"</span>
  <span class="o">[</span><span class="n">ctxt</span><span class="o">]</span>
  <span class="o">[</span><span class="ss">:p</span><span class="c1">#message] (maybe-content (:message ctxt) "Nothing to see here!"))</span>
</pre>
</div>


<p>You declare templates in a regular html files, thus your designer can do his Dreamweaver work the way he/she usually does it.
Then as a developper you just come and stick content at the location that has been decided. Slick uh ?</p>

<h3 id="docjure">Docjure</h3>

<p><a href="https://github.com/ative/docjure">https://github.com/ative/docjure</a></p>

<p>The best way to have fun with spreadsheet in clojure. Relies on the <a href="http://poi.apache.org/">Apache POI</a> library but with some clojure sauce so it can actually be eaten.</p>

<p>This is how you write a simple spreadsheet.</p>

<div class="highlight"><pre><span class="p">(</span><span class="n">use</span> <span class="err">'</span><span class="n">dk</span><span class="o">.</span><span class="n">ative</span><span class="o">.</span><span class="n">docjure</span><span class="o">.</span><span class="n">spreadsheet</span><span class="p">)</span>       

<span class="p">;;</span> <span class="no">Create</span> <span class="n">a</span> <span class="n">spreadsheet</span> <span class="ow">and</span> <span class="n">save</span> <span class="n">it</span>
<span class="p">(</span><span class="n">let</span> <span class="o">[</span><span class="n">wb</span> <span class="p">(</span><span class="n">create</span><span class="o">-</span><span class="n">workbook</span> <span class="s2">"Price List"</span>
                          <span class="o">[[</span><span class="s2">"Name"</span> <span class="s2">"Price"</span><span class="o">]</span>
                           <span class="o">[</span><span class="s2">"Foo Widget"</span> <span class="mi">100</span><span class="o">]</span>
                           <span class="o">[</span><span class="s2">"Bar Widget"</span> <span class="mi">200</span><span class="o">]]</span><span class="p">)</span>
      <span class="n">sheet</span> <span class="p">(</span><span class="nb">select</span><span class="o">-</span><span class="n">sheet</span> <span class="s2">"Price List"</span> <span class="n">wb</span><span class="p">)</span>
      <span class="n">header</span><span class="o">-</span><span class="n">row</span> <span class="p">(</span><span class="n">first</span> <span class="p">(</span><span class="n">row</span><span class="o">-</span><span class="n">seq</span> <span class="n">sheet</span><span class="p">))</span><span class="o">]</span>
  <span class="p">(</span><span class="k">do</span>
    <span class="p">(</span><span class="n">set</span><span class="o">-</span><span class="n">row</span><span class="o">-</span><span class="n">style!</span> <span class="n">header</span><span class="o">-</span><span class="n">row</span> <span class="p">(</span><span class="n">create</span><span class="o">-</span><span class="n">cell</span><span class="o">-</span><span class="n">style!</span> <span class="n">wb</span> <span class="p">{</span><span class="ss">:background</span> <span class="ss">:yellow</span><span class="p">,</span>
                                                       <span class="ss">:font</span> <span class="p">{</span><span class="ss">:bold</span> <span class="kp">true</span><span class="p">}}))</span>
    <span class="p">(</span><span class="n">save</span><span class="o">-</span><span class="n">workbook!</span> <span class="s2">"spreadsheet.xlsx"</span> <span class="n">wb</span><span class="p">)))</span>
</pre>
</div>


<p>For more examples, I suggest you look at the <a href="http://poi.apache.org/spreadsheet/how-to.html#sxssf">"horrible" documentation</a> :)</p>

<h3 id="postal">Postal</h3>

<p><a href="https://github.com/drewr/postal">https://github.com/drewr/postal</a></p>

<p>I am pretty sure you knew how to send a mail before, but look at the awesome way of doing this in Clojure.</p>

<div class="highlight"><pre><span class="p">(</span><span class="n">use</span> <span class="err">'</span><span class="n">postal</span><span class="o">.</span><span class="n">core</span><span class="p">)</span>

<span class="p">(</span><span class="nb">send</span><span class="o">-</span><span class="n">message</span> <span class="o">^</span><span class="p">{</span> <span class="ss">:host</span> <span class="s2">"smtp.gmail.com"</span>
                    <span class="ss">:user</span> <span class="s2">"&lt;username&gt;"</span>
                    <span class="ss">:pass</span> <span class="s2">"&lt;password&gt;"</span>
                    <span class="ss">:ssl</span> <span class="ss">:yes!</span><span class="o">!!</span><span class="mi">11</span>
                <span class="p">}</span>
                <span class="p">{</span>    <span class="ss">:from</span> <span class="s2">"hellonico@gmail.com"</span>
                    <span class="ss">:to</span> <span class="s2">"hellonico@gmail.com"</span>
                    <span class="ss">:subject</span> <span class="s2">"Hi!"</span>
                    <span class="ss">:body</span> <span class="o">[</span> 
                        <span class="p">{</span><span class="ss">:content</span> <span class="s2">"&lt;html&gt;新橋&lt;/html&gt;"</span> <span class="ss">:type</span> <span class="s2">"text/html; charset=utf-8"</span><span class="p">}</span>
                        <span class="p">{</span><span class="ss">:type</span> <span class="ss">:attachment</span> <span class="ss">:content</span> <span class="p">(</span><span class="n">java</span><span class="o">.</span><span class="n">io</span><span class="o">.</span><span class="n">File</span><span class="o">.</span> <span class="s2">"code/mail.txt"</span><span class="p">)}</span>
                        <span class="p">{</span>    <span class="ss">:type</span> <span class="ss">:inline</span> 
                            <span class="ss">:content</span> <span class="p">(</span><span class="n">java</span><span class="o">.</span><span class="n">io</span><span class="o">.</span><span class="n">File</span><span class="o">.</span> <span class="s2">"code/mail.txt"</span><span class="p">)</span> 
                            <span class="ss">:content</span><span class="o">-</span><span class="n">type</span> <span class="s2">"application/text"</span><span class="p">}</span>
                    <span class="o">]</span><span class="p">})</span>
</pre>
</div>


<p>This is including attachment and Japanese encoding. yey</p>

<h3 id="korma-and-lobos">Korma and Lobos</h3>

<p><a href="http://sqlkorma.com/docs">http://sqlkorma.com/docs</a></p>

<p>Korma makes actually enjoyable to write SQL queries.</p>

<h3 id="vaadin">Vaadin</h3>

<p><a href="http://dev.vaadin.com/wiki/Articles/ClojureScripting">http://dev.vaadin.com/wiki/Articles/ClojureScripting</a></p>

<p>This is not so much a library than a way to develop slick web application using Vaadin, but without the java boiler plate code.</p>

<h3 id="clj-opennlp">clj-opennlp</h3>

<p><a href="https://github.com/dakrone/clojure-opennlp">https://github.com/dakrone/clojure-opennlp</a>
Natural Language Processing in Clojure.</p>

<p><a href="https://github.com/eandrejko/clj-tokenizer">Tokenizer</a> for text analysis.</p>

<h3 id="clj-http">clj-http</h3>

<p><a href="https://github.com/dakrone/clj-http">https://github.com/dakrone/clj-http</a></p>

<h3 id="cascalog">Cascalog</h3>

<p><a href="https://github.com/nathanmarz/cascalog/wiki">https://github.com/nathanmarz/cascalog/wiki</a></p>

<h3 id="aleph">Aleph</h3>

<p><a href="https://github.com/ztellman/aleph">https://github.com/ztellman/aleph</a></p>

<h3 id="lamina">Lamina</h3>

<p><a href="https://github.com/ztellman/lamina">https://github.com/ztellman/lamina</a>
Event workflow for clojure</p>

<h3 id="conduit">Conduit</h3>

<p><a href="http://www.intensivesystems.net/tutorials/stream_proc.html">http://www.intensivesystems.net/tutorials/stream_proc.html</a>
Stream processing in Clojure</p>


</div>
  <div class="chapter"><h2 id="processing-opencv-and-imaging">Processing, OpenCV and imaging</h2>

<h3 id="quil">Quil</h3>

<p><a href="https://github.com/quil/quil">https://github.com/quil/quil</a></p>

<p>Quil is to <a href="http://processing.org/">Processing</a> what Clojure is to Java, some fresh air.</p>

<p>This is how your quil-ed processing sketch now looks like:</p>

<div class="highlight"><pre><span class="p">(</span><span class="n">ns</span> <span class="n">quilme</span><span class="o">.</span><span class="n">core</span>
  <span class="p">(</span><span class="ss">:use</span> <span class="n">quil</span><span class="o">.</span><span class="n">core</span><span class="p">))</span>

<span class="p">(</span><span class="n">defn</span> <span class="n">setup</span> <span class="o">[]</span>
  <span class="p">;(</span><span class="n">smooth</span><span class="p">)</span>                          <span class="p">;;</span><span class="no">Turn</span> <span class="n">on</span> <span class="n">anti</span><span class="o">-</span><span class="n">aliasing</span>
  <span class="p">(</span><span class="n">frame</span><span class="o">-</span><span class="n">rate</span> <span class="mi">5</span><span class="p">)</span>                    <span class="p">;;</span><span class="no">Set</span> <span class="n">framerate</span> <span class="n">to</span> <span class="mi">1</span> <span class="no">FPS</span>
  <span class="p">(</span><span class="n">background</span> <span class="mi">0</span><span class="p">))</span>                 <span class="p">;;</span><span class="no">Set</span> <span class="n">the</span> <span class="n">background</span> <span class="n">colour</span> <span class="n">to</span>
                                    <span class="p">;;</span>  <span class="n">a</span> <span class="n">nice</span> <span class="n">shade</span> <span class="n">of</span> <span class="n">grey</span><span class="o">.</span>
<span class="p">(</span><span class="n">defn</span> <span class="n">draw</span> <span class="o">[]</span>
  <span class="p">(</span><span class="n">stroke</span> <span class="p">(</span><span class="n">random</span> <span class="mi">255</span><span class="p">))</span>             <span class="p">;;</span><span class="no">Set</span> <span class="n">the</span> <span class="n">stroke</span> <span class="n">colour</span> <span class="n">to</span> <span class="n">a</span> <span class="n">random</span> <span class="n">grey</span>
  <span class="p">(</span><span class="n">stroke</span><span class="o">-</span><span class="n">weight</span> <span class="p">(</span><span class="n">random</span> <span class="mi">10</span><span class="p">))</span>       <span class="p">;;</span><span class="no">Set</span> <span class="n">the</span> <span class="n">stroke</span> <span class="n">thickness</span> <span class="n">randomly</span>
  <span class="p">(</span><span class="n">fill</span> <span class="p">(</span><span class="n">random</span> <span class="mi">255</span><span class="p">))</span>               <span class="p">;;</span><span class="no">Set</span> <span class="n">the</span> <span class="n">fill</span> <span class="n">colour</span> <span class="n">to</span> <span class="n">a</span> <span class="n">random</span> <span class="n">grey</span>

  <span class="p">(</span><span class="n">let</span> <span class="o">[</span><span class="n">diam</span> <span class="p">(</span><span class="n">random</span> <span class="mi">100</span><span class="p">)</span>           <span class="p">;;</span><span class="no">Set</span> <span class="n">the</span> <span class="n">diameter</span> <span class="n">to</span> <span class="n">a</span> <span class="n">value</span> <span class="n">between</span> <span class="mi">0</span> <span class="ow">and</span> <span class="mi">100</span>
        <span class="n">x</span>    <span class="p">(</span><span class="n">random</span> <span class="p">(</span><span class="n">width</span><span class="p">))</span>       <span class="p">;;</span><span class="no">Set</span> <span class="n">the</span> <span class="n">x</span> <span class="n">coord</span> <span class="n">randomly</span> <span class="n">within</span> <span class="n">the</span> <span class="n">sketch</span>
        <span class="n">y</span>    <span class="p">(</span><span class="n">random</span> <span class="p">(</span><span class="n">height</span><span class="p">))</span><span class="o">]</span>     <span class="p">;;</span><span class="no">Set</span> <span class="n">the</span> <span class="n">y</span> <span class="n">coord</span> <span class="n">randomly</span> <span class="n">within</span> <span class="n">the</span> <span class="n">sketch</span>
    <span class="p">(</span><span class="n">ellipse</span> <span class="n">x</span> <span class="n">y</span> <span class="n">diam</span> <span class="n">diam</span><span class="p">)))</span>       <span class="p">;;</span><span class="no">Draw</span> <span class="n">a</span> <span class="n">circle</span> <span class="n">at</span> <span class="n">x</span> <span class="n">y</span> <span class="n">with</span> <span class="n">the</span> <span class="n">correct</span> <span class="n">diameter</span>

<span class="p">(</span><span class="n">defsketch</span> <span class="n">example</span>                  <span class="p">;;</span><span class="no">Define</span> <span class="n">a</span> <span class="kp">new</span> <span class="n">sketch</span> <span class="n">named</span> <span class="n">example</span>
  <span class="ss">:title</span> <span class="s2">"Oh so many grey circles"</span>  <span class="p">;;</span><span class="no">Set</span> <span class="n">the</span> <span class="n">title</span> <span class="n">of</span> <span class="n">the</span> <span class="n">sketch</span>
  <span class="ss">:setup</span> <span class="n">setup</span>                      <span class="p">;;</span><span class="no">Specify</span> <span class="n">the</span> <span class="n">setup</span> <span class="n">fn</span>
  <span class="ss">:draw</span> <span class="n">draw</span>                        <span class="p">;;</span><span class="no">Specify</span> <span class="n">the</span> <span class="n">draw</span> <span class="n">fn</span>
  <span class="ss">:render</span> <span class="ss">:opengl</span>
  <span class="ss">:decor</span> <span class="kp">false</span>
  <span class="ss">:size</span> <span class="o">[</span><span class="mi">800</span> <span class="mi">600</span><span class="o">]</span><span class="p">)</span>                  <span class="p">;;</span><span class="no">You</span> <span class="n">struggle</span> <span class="n">to</span> <span class="n">beat</span> <span class="n">the</span> <span class="n">golden</span> <span class="n">ratio</span>
</pre>
</div>


<p>Note the decor set to false, that hides most of the uglyness of the Window borders.</p>

<p>And all the <a href="https://github.com/quil/quil/tree/master/examples/gen_art">examples</a> you have ever dreamed from the Generative Art book have been implemented in Clojure/Quil.</p>

<ul><li>https://github.com/bagucode/clj-native</li>
<li>https://groups.google.com/forum/?fromgroups=#!topic/clojure/WHKlys_SmcU</li>
<li>http://im4java.sourceforge.net/</li>
<li>https://github.com/bagucode/clj-native</li>
</ul></div>
  <div class="chapter"><h2 id="opencv-arduino">OpenCV, Arduino </h2>

<h3 id="physics-with-clojure">Physics with Clojure</h3>

<ul><li><a href="[http://nakkaya.com/2010/07/21/physics-with-clojure/">http://nakkaya.com/2010/07/21/physics-with-clojure/</a></li>
<li><a href="http://antoniogarrote.wordpress.com/2011/01/30/ocr-with-clojure-tesseract-and-opencv/">http://antoniogarrote.wordpress.com/2011/01/30/ocr-with-clojure-tesseract-and-opencv/</a></li>
</ul><h3 id="cloduino">Cloduino</h3>

<p><a href="https://github.com/nakkaya/clodiuno">https://github.com/nakkaya/clodiuno</a></p>

<p>Once you have uploaded the Firmata protocol on your board
<code>
File -&gt; Examples -&gt; Firmata -&gt; StandartFirmata
</code></p>

<p>You can send a Clojure SOS.</p>

<div class="highlight"><pre><span class="p">(</span><span class="n">ns</span> <span class="n">sos</span>
   <span class="p">(</span><span class="ss">:use</span> <span class="ss">:reload</span><span class="o">-</span><span class="n">all</span> <span class="n">clodiuno</span><span class="o">.</span><span class="n">core</span><span class="p">)</span>
   <span class="p">(</span><span class="ss">:use</span> <span class="ss">:reload</span><span class="o">-</span><span class="n">all</span> <span class="n">clodiuno</span><span class="o">.</span><span class="n">firmata</span><span class="p">))</span>

 <span class="p">(</span><span class="k">def</span> <span class="nf">short</span><span class="o">-</span><span class="n">pulse</span> <span class="mi">250</span><span class="p">)</span>
 <span class="p">(</span><span class="k">def</span> <span class="nf">long</span><span class="o">-</span><span class="n">pulse</span> <span class="mi">500</span><span class="p">)</span>
 <span class="p">(</span><span class="k">def</span> <span class="nf">letter</span><span class="o">-</span><span class="n">delay</span> <span class="mi">1000</span><span class="p">)</span>

 <span class="p">(</span><span class="k">def</span> <span class="nf">letter</span><span class="o">-</span><span class="n">s</span> <span class="o">[</span><span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span><span class="o">]</span><span class="p">)</span>
 <span class="p">(</span><span class="k">def</span> <span class="nf">letter</span><span class="o">-</span><span class="n">o</span> <span class="o">[</span><span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span><span class="o">]</span><span class="p">)</span>

 <span class="p">(</span><span class="n">defn</span> <span class="n">blink</span> <span class="o">[</span><span class="n">board</span> <span class="n">time</span><span class="o">]</span>
   <span class="p">(</span><span class="n">digital</span><span class="o">-</span><span class="n">write</span> <span class="n">board</span> <span class="mi">13</span> <span class="no">HIGH</span><span class="p">)</span>
   <span class="p">(</span><span class="no">Thread</span><span class="o">/</span><span class="nb">sleep</span> <span class="n">time</span><span class="p">)</span>
   <span class="p">(</span><span class="n">digital</span><span class="o">-</span><span class="n">write</span> <span class="n">board</span> <span class="mi">13</span> <span class="no">LOW</span><span class="p">)</span>
   <span class="p">(</span><span class="no">Thread</span><span class="o">/</span><span class="nb">sleep</span> <span class="n">time</span><span class="p">))</span>

 <span class="p">(</span><span class="n">defn</span> <span class="n">blink</span><span class="o">-</span><span class="n">letter</span> <span class="o">[</span><span class="n">board</span> <span class="n">letter</span><span class="o">]</span>
   <span class="p">(</span><span class="n">doseq</span> <span class="o">[</span><span class="n">i</span> <span class="n">letter</span><span class="o">]</span>
     <span class="p">(</span><span class="k">if</span> <span class="p">(</span><span class="o">=</span> <span class="n">i</span> <span class="mi">0</span><span class="p">)</span>
       <span class="p">(</span><span class="n">blink</span> <span class="n">board</span> <span class="n">short</span><span class="o">-</span><span class="n">pulse</span><span class="p">)</span>
       <span class="p">(</span><span class="n">blink</span> <span class="n">board</span> <span class="n">long</span><span class="o">-</span><span class="n">pulse</span><span class="p">)))</span>
   <span class="p">(</span><span class="no">Thread</span><span class="o">/</span><span class="nb">sleep</span> <span class="n">letter</span><span class="o">-</span><span class="n">delay</span><span class="p">))</span>

 <span class="p">(</span><span class="n">defn</span> <span class="n">sos</span> <span class="o">[]</span>
   <span class="p">(</span><span class="n">let</span> <span class="o">[</span><span class="n">board</span> <span class="p">(</span><span class="n">arduino</span> <span class="ss">:firmata</span> <span class="s2">"/dev/tty.usbserial-A900adPT"</span><span class="p">)</span><span class="o">]</span> 
     <span class="p">;;</span><span class="n">allow</span> <span class="n">arduino</span> <span class="n">to</span> <span class="n">boot</span>
     <span class="p">(</span><span class="no">Thread</span><span class="o">/</span><span class="nb">sleep</span> <span class="mi">5000</span><span class="p">)</span>
     <span class="p">(</span><span class="n">pin</span><span class="o">-</span><span class="n">mode</span> <span class="n">board</span> <span class="mi">13</span> <span class="no">OUTPUT</span><span class="p">)</span>

     <span class="p">(</span><span class="n">doseq</span> <span class="o">[</span><span class="n">_</span> <span class="p">(</span><span class="n">range</span> <span class="mi">3</span><span class="p">)</span><span class="o">]</span> 
       <span class="p">(</span><span class="n">blink</span><span class="o">-</span><span class="n">letter</span> <span class="n">board</span> <span class="n">letter</span><span class="o">-</span><span class="n">s</span><span class="p">)</span>
       <span class="p">(</span><span class="n">blink</span><span class="o">-</span><span class="n">letter</span> <span class="n">board</span> <span class="n">letter</span><span class="o">-</span><span class="n">o</span><span class="p">)</span>
       <span class="p">(</span><span class="n">blink</span><span class="o">-</span><span class="n">letter</span> <span class="n">board</span> <span class="n">letter</span><span class="o">-</span><span class="n">s</span><span class="p">))</span>

     <span class="p">(</span><span class="n">close</span> <span class="n">board</span><span class="p">)))</span>
</pre>
</div>


<p>There are so many more great <a href="http://nakkaya.com/clodiuno.html">Samples</a> that Nakkaya has been writing. Make sure you go through them.</p>


</div>
  <div class="chapter"><h2 id="live-music">Live Music</h2>

<h3 id="overtone">Overtone</h3>

<p><a href="https://github.com/overtone/overtone/wiki/Getting-Started">https://github.com/overtone/overtone/wiki/Getting-Started</a></p>

<p>Because you really need to live audio programming to be a real VJ these days.
This is how you install it:</p>

<div class="highlight"><pre><span class="p">(</span><span class="n">defproject</span> <span class="n">tutorial</span> <span class="s2">"1.0"</span>
  <span class="ss">:dependencies</span> <span class="o">[</span> <span class="o">[</span><span class="n">org</span><span class="o">.</span><span class="n">clojure</span><span class="o">/</span><span class="n">clojure</span> <span class="s2">"1.3.0"</span><span class="o">]</span>
                  <span class="o">[</span><span class="n">overtone</span> <span class="s2">"0.7.1"</span><span class="o">]</span> <span class="o">]</span><span class="p">)</span>
</pre>
</div>


<p>Once the library is in your project, type</p>

<p><code></code></p>

<pre><code>(use 'overtone.live)
</code></pre>

<p></p>

<p>And now you can define an instrument
<code></code></p>

<pre><code>(definst foo [] (saw 220))
</code></pre>

<p></p>

<p>And make some sound !</p>

<p><code></code></p>

<blockquote><p>(foo) ; Call the function returned by our synth
4      ; returns a synth ID number
(kill 4) ; kill the synth with ID 4
(kill foo) ; or kill all instances of synth foo</p></blockquote>

<p></p>


</div>
  <div class="chapter"><h2 id="in-the-clouds">In the Clouds</h2>

<h3 id="pallet">Pallet</h3>

<p><a href="http://palletops.com/">http://palletops.com/</a></p>

<p>Pallet is the mother of them all of cloud infrastructure tool. See the <a href="http://www.jclouds.org/documentation/reference/supported-providers/">list of providers</a> it supports!
They are actually doing this through <a href="http://www.jclouds.org/">jclouds</a></p>

<h3 id="heroku">Heroku</h3>

<p><a href="https://devcenter.heroku.com/articles/debugging-clojure">Debugging clojure on Heroku</a></p>

<h3 id="vmfest">VMFest</h3>

<p><a href="https://github.com/tbatchelli/vmfest">https://github.com/tbatchelli/vmfest</a></p>

<p>Easy VirtualBox wrapper for easy cloud management.</p>

<div class="highlight"><pre><span class="p">;</span> <span class="n">you</span> <span class="n">can</span> <span class="n">define</span> <span class="n">your</span> <span class="n">machine</span> <span class="n">this</span> <span class="n">way</span><span class="p">:</span>
<span class="p">(</span><span class="k">def</span> <span class="nf">my</span><span class="o">-</span><span class="n">machine</span> 
     <span class="p">(</span><span class="n">instance</span> <span class="n">my</span><span class="o">-</span><span class="n">server</span> <span class="s2">"my-vmfest-vm"</span> 
        <span class="p">{</span><span class="ss">:uuid</span> <span class="s2">"/Users/tbatchelli/imgs/vmfest-Debian-6.0.2.1-64bit-v0.3.vdi"</span><span class="p">}</span>  
        <span class="p">{</span><span class="ss">:memory</span><span class="o">-</span><span class="n">size</span> <span class="mi">512</span>
         <span class="ss">:cpu</span><span class="o">-</span><span class="n">count</span> <span class="mi">1</span>
         <span class="ss">:network</span> <span class="o">[</span><span class="p">{</span><span class="ss">:attachment</span><span class="o">-</span><span class="n">type</span> <span class="ss">:host</span><span class="o">-</span><span class="n">only</span>
                    <span class="ss">:host</span><span class="o">-</span><span class="n">only</span><span class="o">-</span><span class="n">interface</span> <span class="s2">"vboxnet0"</span><span class="p">}</span>
                   <span class="p">{</span><span class="ss">:attachment</span><span class="o">-</span><span class="n">type</span> <span class="ss">:nat</span><span class="p">}</span><span class="o">]</span>
         <span class="ss">:storage</span> <span class="o">[</span><span class="p">{</span><span class="ss">:name</span> <span class="s2">"IDE Controller"</span>
                    <span class="ss">:bus</span> <span class="ss">:ide</span>
                    <span class="ss">:devices</span> <span class="o">[</span><span class="kp">nil</span> <span class="kp">nil</span> <span class="p">{</span><span class="ss">:device</span><span class="o">-</span><span class="n">type</span> <span class="ss">:dvd</span><span class="p">}</span> <span class="kp">nil</span><span class="o">]</span><span class="p">}</span><span class="o">]</span>
         <span class="ss">:boot</span><span class="o">-</span><span class="n">mount</span><span class="o">-</span><span class="n">point</span> <span class="o">[</span><span class="s2">"IDE Controller"</span> <span class="mi">0</span><span class="o">]</span><span class="p">}))</span>

<span class="p">;</span> <span class="k">then</span> <span class="n">this</span> <span class="n">is</span> <span class="n">the</span> <span class="n">way</span> <span class="n">to</span> <span class="n">start</span><span class="o">/</span><span class="n">stop</span><span class="o">.</span><span class="n">.</span> <span class="n">any</span> <span class="n">of</span> <span class="n">the</span> <span class="n">virtual</span> <span class="n">machines</span> <span class="n">you</span> <span class="n">have</span>
<span class="p">(</span><span class="n">start</span> <span class="n">my</span><span class="o">-</span><span class="n">machine</span><span class="p">)</span>
<span class="p">(</span><span class="n">pause</span> <span class="n">my</span><span class="o">-</span><span class="n">machine</span><span class="p">)</span>
<span class="p">(</span><span class="n">resume</span> <span class="n">my</span><span class="o">-</span><span class="n">machine</span><span class="p">)</span>
<span class="p">(</span><span class="n">stop</span> <span class="n">my</span><span class="o">-</span><span class="n">machine</span><span class="p">)</span>
<span class="p">(</span><span class="n">destroy</span> <span class="n">my</span><span class="o">-</span><span class="n">machine</span><span class="p">)</span>
</pre>
</div>


<p>Make sure you also look at the <a href="https://github.com/pallet/vmfest-playground">playground</a> and have a look at the <a href="https://github.com/pallet/vmfest-playground/blob/master/src/play.clj">tutorial</a></p>


</div>
  <div class="chapter">
    <ul><li>http://www.intensivesystems.net/tutorials/stream_proc.html</li>
<li>https://github.com/sattvik/Clojure-Android-Examples</li>
</ul></div>

    </div>

    <div class="imprint container">
      <div>
        <h2>Clojure for pleasure</h2>
        <p>Nico</p>
        <p>Copyright (C) 2012 Nico.</p>
      </div>
    </div>
  </body>
</html>
