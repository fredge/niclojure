<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
  <head>
    <title></title>
    <meta http-equiv="Content-type" content="text/html; charset=utf-8" />
    <link rel="stylesheet" type="text/css" href="user.css"/>
  </head>

  <body>
    <div class="chapter">
      <h2 id="welcome-to-clojure-through-leiningen">Welcome to Clojure, through Leiningen</h2>

<p>This book is about sharing my love for Clojure, why I use it, and why I will keep using it for a fair bit of time. You don't need to be a great IT geek, you just have to start using Clojure. Here we go.</p>

<h3 id="clojure">Clojure</h3>

<p><a href="http://learn-clojure.com/clojure_tutorials.html">http://learn-clojure.com/clojure_tutorials.html</a></p>

<p>I will not go too much into the first steps details, since this is not the aim of this book. There is a completely new online book written by <a href="http://www.unexpected-vortices.com/clojure/brief-beginners-guide/index.html">John</a> that should get all the attention it deserves.</p>

<p>Do not forget to do a few <a href="https://github.com/functional-koans/clojure-koans">clojure koans</a> to make sure the basic and the roots are ok.</p>

<p>I have added a few trips and ticks in the 00_zero.clj file (in the samples), so feel free to go along and try it by yourself, once you have read the next section about how to get started with clojure.</p>

<h3 id="leiningen">Leiningen</h3>

<p><a href="https://github.com/technomancy/leiningen">https://github.com/technomancy/leiningen</a></p>

<p>To start using clojure, you actually do not install it. You start by installing Leiningen. Once you have it installed, you should be able to see the following:</p>

<div class="highlight">
<pre><span class="o">[</span><span class="no">Niko</span><span class="vi">@Modrzyks</span><span class="o">-</span><span class="no">MacBook</span><span class="o">-</span><span class="no">Pro</span><span class="o">][</span><span class="mi">13</span><span class="p">:</span><span class="mi">44</span><span class="o">][~</span><span class="sr">/projects/</span><span class="o">]</span> <span class="o">%</span> <span class="n">lein</span> 
<span class="no">Leiningen</span> <span class="n">is</span> <span class="n">a</span> <span class="n">tool</span> <span class="k">for</span> <span class="n">working</span> <span class="n">with</span> <span class="no">Clojure</span> <span class="n">projects</span><span class="o">.</span>

<span class="no">Several</span> <span class="n">tasks</span> <span class="n">are</span> <span class="n">available</span><span class="p">:</span>
<span class="n">classpath</span>   <span class="no">Print</span> <span class="n">the</span> <span class="n">classpath</span> <span class="n">of</span> <span class="n">the</span> <span class="n">current</span> <span class="n">project</span><span class="o">.</span>
<span class="n">clean</span>       <span class="no">Remove</span> <span class="n">compiled</span> <span class="k">class</span> <span class="n">files</span> <span class="ow">and</span> <span class="n">jars</span> <span class="n">from</span> <span class="n">project</span><span class="o">.</span>
<span class="n">compile</span>     <span class="no">Compile</span> <span class="no">Clojure</span> <span class="n">source</span> <span class="n">into</span> <span class="o">.</span><span class="n">class</span> <span class="n">files</span><span class="o">.</span>
<span class="n">deploy</span>      <span class="no">Build</span> <span class="n">jar</span> <span class="ow">and</span> <span class="n">deploy</span> <span class="n">to</span> <span class="n">remote</span> <span class="n">repository</span><span class="o">.</span>
<span class="n">deps</span>        <span class="no">Download</span> <span class="ss">:dependencies</span> <span class="ow">and</span> <span class="n">put</span> <span class="n">them</span> <span class="k">in</span> <span class="ss">:library</span><span class="o">-</span><span class="n">path</span><span class="o">.</span>
<span class="n">help</span>        <span class="no">Display</span> <span class="n">a</span> <span class="n">list</span> <span class="n">of</span> <span class="n">tasks</span> <span class="ow">or</span> <span class="n">help</span> <span class="k">for</span> <span class="n">a</span> <span class="n">given</span> <span class="n">task</span><span class="o">.</span>
<span class="n">install</span>     <span class="no">Install</span> <span class="n">current</span> <span class="n">project</span> <span class="ow">or</span> <span class="n">download</span> <span class="n">specified</span> <span class="n">project</span><span class="o">.</span>
<span class="n">interactive</span> <span class="no">Enter</span> <span class="n">an</span> <span class="n">interactive</span> <span class="n">task</span> <span class="n">shell</span><span class="o">.</span> <span class="no">Aliased</span> <span class="n">to</span> <span class="s2">"int"</span><span class="o">.</span>
<span class="n">jar</span>         <span class="no">Package</span> <span class="n">up</span> <span class="n">all</span> <span class="n">the</span> <span class="n">project</span><span class="s1">'s files into a jar file.</span>
<span class="s1">javac       Compile Java source files.</span>
<span class="s1">new         Create a new project skeleton.</span>
<span class="s1">plugin      Manage user-level plugins.</span>
<span class="s1">pom         Write a pom.xml file to disk for Maven interop.</span>
<span class="s1">repl        Start a repl session either with the current project or standalone.</span>
<span class="s1">retest      Run only the test namespaces which failed last time around.</span>
<span class="s1">run         Run the project'</span><span class="n">s</span> <span class="o">-</span><span class="n">main</span> <span class="n">function</span><span class="o">.</span>
<span class="n">search</span>      <span class="no">Search</span> <span class="n">remote</span> <span class="n">maven</span> <span class="n">repositories</span> <span class="k">for</span> <span class="n">matching</span> <span class="n">jars</span><span class="o">.</span>
<span class="nb">test</span>        <span class="no">Run</span> <span class="n">the</span> <span class="n">project</span><span class="s1">'s tests.</span>
<span class="s1">test!       Run a project'</span><span class="n">s</span> <span class="n">tests</span> <span class="n">after</span> <span class="n">cleaning</span> <span class="ow">and</span> <span class="n">fetching</span> <span class="n">dependencies</span><span class="o">.</span>
<span class="n">trampoline</span>  <span class="no">Run</span> <span class="n">a</span> <span class="n">task</span> <span class="n">without</span> <span class="n">nesting</span> <span class="n">the</span> <span class="n">project</span><span class="s1">'s JVM inside Leiningen'</span><span class="n">s</span><span class="o">.</span>
<span class="n">uberjar</span>     <span class="no">Package</span> <span class="n">up</span> <span class="n">the</span> <span class="n">project</span> <span class="n">files</span> <span class="ow">and</span> <span class="n">all</span> <span class="n">dependencies</span> <span class="n">into</span> <span class="n">a</span> <span class="n">jar</span> <span class="n">file</span><span class="o">.</span>
<span class="n">upgrade</span>     
<span class="n">version</span>     <span class="no">Print</span> <span class="n">version</span> <span class="k">for</span> <span class="no">Leiningen</span> <span class="ow">and</span> <span class="n">the</span> <span class="n">current</span> <span class="no">JVM</span><span class="o">.</span>

<span class="no">Run</span> <span class="n">lein</span> <span class="n">help</span> <span class="vg">$TASK</span> <span class="k">for</span> <span class="n">details</span><span class="o">.</span>
<span class="no">See</span> <span class="n">also</span><span class="p">:</span> <span class="n">readme</span><span class="p">,</span> <span class="n">tutorial</span><span class="p">,</span> <span class="n">copying</span><span class="p">,</span> <span class="n">sample</span><span class="p">,</span> <span class="n">deploying</span> <span class="ow">and</span> <span class="n">news</span><span class="o">.</span>
</pre>
</div>


<p>Now if you just want to start using some live clojure, you just go with:</p>

<div class="highlight">
<pre><span class="o">[</span><span class="no">Niko</span><span class="vi">@Modrzyks</span><span class="o">-</span><span class="no">MacBook</span><span class="o">-</span><span class="no">Pro</span><span class="o">][</span><span class="mi">13</span><span class="p">:</span><span class="mi">50</span><span class="o">][~</span><span class="sr">/] % lein repl</span>
<span class="sr">REPL started; server listening on localhost port 27991</span>
<span class="sr">user=&gt; </span>
</pre>
</div>


<p>And there you are. Was simple no ?</p>

<p>And here is your mother of them all hello world</p>

<div class="highlight">
<pre><span class="p">;</span> <span class="n">yes</span> <span class="n">indeed</span>
<span class="p">(</span><span class="n">println</span> <span class="s2">"hello clojure!"</span><span class="p">)</span>

<span class="p">;</span> <span class="kp">include</span> <span class="n">a</span> <span class="kp">new</span> <span class="n">namespace</span> <span class="k">in</span> <span class="n">the</span> <span class="n">current</span> <span class="n">namespace</span>
<span class="p">;</span> <span class="ow">and</span> <span class="n">use</span> <span class="n">a</span> <span class="n">custom</span> <span class="nb">name</span>
<span class="p">(</span><span class="nb">require</span> <span class="err">'</span><span class="o">[</span><span class="n">clojure</span><span class="o">.</span><span class="n">string</span> <span class="ss">:as</span> <span class="n">string</span><span class="o">]</span><span class="p">)</span>

<span class="p">;</span> <span class="n">use</span> <span class="n">the</span> <span class="n">newly</span> <span class="n">imported</span> <span class="n">namespace</span>
<span class="p">(</span><span class="k">def</span> <span class="nf">new_string</span> <span class="p">(</span><span class="n">string</span><span class="o">/</span><span class="n">replace</span> <span class="s2">"Hello World"</span> <span class="s2">"World"</span> <span class="s2">"Nico"</span><span class="p">))</span>

<span class="p">;</span> <span class="nb">print</span>
<span class="p">(</span><span class="n">println</span> <span class="n">new_string</span><span class="p">)</span>
</pre>
</div>


<p>Now you have to realize that all the libs available to the Java World through Maven repositories, and all the libs hosted on Clojars can be integrated in the project in no time by using the command:</p>

<p><em>lein deps</em></p>

<p>The libraries will come to your local project folder. Let's hack in no time.</p>

<h4 id="search-clojars">Search clojars</h4>

<p>To search a library online, use the following syntax:
<code></code></p>

<pre><code>lein search &lt;libraryname&gt;
</code></pre>

<p></p>

<p>For example
<code></code></p>

<pre><code>lein search jsoup     
</code></pre>

<p>
will return</p>

<p><code>
 == Results from clojars - Showing page 1 / 1 total
[org.clojars.clizzin/jsoup "1.5.1"] jsoup HTML parser
</code></p>

<h4 id="upload-to-clojars">Upload to clojars</h4>

<p>There is a plugin called <a href="https://github.com/ato/lein-clojars">lein-clojars</a></p>

<p>You install it somehow like this:
<code></code></p>

<pre><code>lein plugin install lein-clojars 0.9.1
</code></pre>

<p></p>

<p>Then in a clojure project, just go and upload it with
<code></code></p>

<pre><code>lein push
</code></pre>

<p>
Nothing else.</p>

<p>Then a lein search will (should) show it.</p>

<h4 id="examples">Examples</h4>

<p>All the examples in this book can be run with:
<code>
(use 'clojure.string)
(load-file "code/18_clojure_soup.clj")
</code></p>

<p>If you can not run them, let me know ;)</p>

<h3 id="jark">Jark</h3>

<p><a href="http://icylisper.in/jark/started.html">http://icylisper.in/jark/started.html</a></p>

<p>Next you probably going to get tired of the Java VM so very slow startup time. Here comes <a href="https://github.com/clojure/tools.nrepl">nrepl</a> and <a href="http://icylisper.in/jark/features.html">Jark</a></p>

<p>Create a new leiningen project, and follow the jark install steps:</p>

<div class="highlight">
<pre><span class="p">;</span> <span class="n">project</span><span class="o">.</span><span class="n">clj</span>
<span class="p">(</span><span class="n">comment</span> 
    <span class="p">;</span> <span class="kp">include</span> <span class="n">this</span> <span class="k">in</span> <span class="n">project</span><span class="o">.</span><span class="n">clj</span>
<span class="p">(</span><span class="n">defproject</span> <span class="n">book01</span> <span class="s2">"1.0.0-SNAPSHOT"</span>
  <span class="ss">:dependencies</span> <span class="o">[</span>
    <span class="o">[</span><span class="n">org</span><span class="o">.</span><span class="n">clojure</span><span class="o">/</span><span class="n">clojure</span> <span class="s2">"1.3.0"</span><span class="o">]</span>
    <span class="o">[</span><span class="n">jark</span> <span class="s2">"0.4.2"</span> <span class="ss">:exclusions</span> <span class="o">[</span><span class="n">org</span><span class="o">.</span><span class="n">clojure</span><span class="o">/</span><span class="n">clojure</span><span class="o">]]</span> 
  <span class="o">]</span><span class="p">))</span>

<span class="p">;</span> <span class="n">now</span> <span class="n">let</span><span class="s1">'s start the embedded repl</span>
<span class="s1">(require '</span><span class="o">[</span><span class="n">clojure</span><span class="o">.</span><span class="n">tools</span><span class="o">.</span><span class="n">nrepl</span> <span class="ss">:as</span> <span class="n">nrepl</span><span class="o">]</span><span class="p">)</span>
<span class="p">(</span><span class="n">nrepl</span><span class="o">/</span><span class="n">start</span><span class="o">-</span><span class="n">server</span> <span class="mi">9000</span><span class="p">)</span>
</pre>
</div>


<p>and then start the repl with the new code from core.clj</p>

<div class="highlight">
<pre><span class="o">[</span><span class="no">Niko</span><span class="vi">@Modrzyks</span><span class="o">-</span><span class="no">MacBook</span><span class="o">-</span><span class="no">Pro</span><span class="o">][</span><span class="mi">14</span><span class="p">:</span><span class="mi">11</span><span class="o">][~</span><span class="sr">/projects/</span><span class="n">book01</span><span class="o">/]</span> <span class="o">%</span> <span class="n">lein</span> <span class="n">repl</span>
<span class="no">REPL</span> <span class="n">started</span><span class="p">;</span> <span class="n">server</span> <span class="n">listening</span> <span class="n">on</span> <span class="n">localhost</span> <span class="n">port</span> <span class="mi">42326</span>
<span class="n">user</span><span class="o">=&gt;</span> <span class="p">(</span><span class="nb">load</span><span class="o">-</span><span class="n">file</span> <span class="s2">"src/book01/core.clj"</span><span class="p">)</span>
</pre>
</div>


<p>And now straight from the shell you can use and run remote clojure code</p>

<div class="highlight">
<pre><span class="o">[</span><span class="no">Niko</span><span class="vi">@Modrzyks</span><span class="o">-</span><span class="no">MacBook</span><span class="o">-</span><span class="no">Pro</span><span class="o">][</span><span class="mi">14</span><span class="p">:</span><span class="mi">16</span><span class="o">][~</span><span class="sr">/Downloads/</span><span class="n">jark</span><span class="o">-</span><span class="mi">0</span><span class="o">.</span><span class="mi">4</span><span class="o">.</span><span class="mi">2</span><span class="o">-</span><span class="no">Darwin</span><span class="o">-</span><span class="n">x86_64</span><span class="o">/]</span> <span class="o">%</span> <span class="n">jark</span> <span class="o">-</span><span class="n">e</span> <span class="s2">"(+ 2 2)"</span>
<span class="o">=&gt;</span> <span class="mi">4</span>
</pre>
</div>


<p>Now that is some sweet fast starting time, so stop buzzing around.</p>

<h3 id="pomegrenate">Pomegrenate</h3>

<p><a href="https://github.com/cemerick/pomegranate">https://github.com/cemerick/pomegranate</a></p>

<p>This is the best way to add libraries at runtime. You still need the library itself to be available to the repl, by adding this to your <strong>project.clj</strong> file:</p>

<p><code></code></p>

<pre><code>[com.cemerick/pomegranate "0.0.13"]
</code></pre>

<p></p>

<p>Then, here is how to import incanter in a running REPL session:</p>

<div class="highlight">
<pre><span class="o">[</span><span class="n">missing</span> <span class="s1">'code/11_pomegranata.clj'</span> <span class="n">file</span><span class="o">]</span>
</pre>
</div>


<h3 id="scala-integration">Scala Integration</h3>

<p>Since every source file in a lein project can be integrated, you can use the <a href="https://github.com/technomancy/lein-scalac">scalac-plugin</a></p>

<p>Here is the HelloWorld.scala file:</p>

<div class="highlight">
<pre><span class="sr">//</span> <span class="no">HelloWorld</span><span class="o">.</span><span class="n">scala</span>

<span class="k">class</span> <span class="nc">HelloWorld</span> <span class="p">{</span>
  <span class="k">def</span> <span class="nf">sayHelloToClojure</span><span class="p">(</span><span class="n">msg</span><span class="p">:</span> <span class="nb">String</span><span class="p">)</span> <span class="o">=</span>
    <span class="s2">"Here's the second echo message from Scala: "</span> <span class="n">concat</span> <span class="n">msg</span>
<span class="p">}</span>
</pre>
</div>


<p>and here is how you call it from Clojure</p>

<div class="highlight">
<pre><span class="p">(</span><span class="n">import</span> <span class="no">HelloWorld</span><span class="p">)</span>
<span class="p">(</span><span class="o">.</span><span class="n">sayHelloToClojure</span> <span class="p">(</span><span class="no">HelloWorld</span><span class="o">.</span><span class="p">)</span> <span class="s2">"Hi there"</span><span class="p">)</span>
</pre>
</div>


<p>Now you can tell your friend you know more than one language on the JVM. :)</p>

<h3 id="java-integration">Java Integration</h3>

<p>Note that the scala integration right above is also supported by the original java. This is actually built in leiningen. Here is how you put it together just in case:</p>

<div class="highlight">
<pre><span class="p">(</span><span class="n">import</span> <span class="no">HelloWorldJava</span><span class="p">)</span>
<span class="p">(</span><span class="o">.</span><span class="n">sayHello</span> <span class="p">(</span><span class="no">HelloWorldJava</span><span class="o">.</span><span class="p">)</span> <span class="s2">"World"</span><span class="p">)</span>
</pre>
</div>


<p>This is actually very good to keep old sources ready to be migrated, or actually the whole power of leiningen is that it is going to install everything you want from the command line to get you started with a regular java project as well. Yurk.</p>

<h3 id="hooke">Hooke</h3>

<p><a href="https://github.com/technomancy/robert-hooke/">https://github.com/technomancy/robert-hooke/</a></p>

<p>While searching for an example on the javac plugin above, I stubmled on a super example on how to add hooks on methods.
Awesome.</p>

<p><code>
[robert/hooke "1.1.2"]
</code></p>

<div class="highlight">
<pre><span class="p">(</span><span class="n">use</span> <span class="s1">'robert.hooke)</span>

<span class="s1">(defn examine [x]</span>
<span class="s1">  (println x))</span>

<span class="s1">(defn microscope</span>
<span class="s1">  "The keen powers of observation enabled by Robert Hooke allow</span>
<span class="s1">  for a closer look at any object!"</span>
<span class="s1">  [f x]</span>
<span class="s1">  (f (.toUpperCase x)))</span>

<span class="s1">(defn doubler [f &amp; args]</span>
<span class="s1">  (apply f args)</span>
<span class="s1">  (apply f args))</span>

<span class="s1">(defn telescope [f x]</span>
<span class="s1">  (f (apply str (interpose " " x))))</span>

<span class="s1">(add-hook #'</span><span class="n">examine</span> <span class="c1">#'microscope)</span>
<span class="p">(</span><span class="n">add</span><span class="o">-</span><span class="n">hook</span> <span class="c1">#'examine #'doubler)</span>
<span class="p">(</span><span class="n">add</span><span class="o">-</span><span class="n">hook</span> <span class="c1">#'examine #'telescope)</span>

<span class="p">(</span><span class="n">examine</span> <span class="s2">"something"</span><span class="p">)</span>

<span class="p">;</span> <span class="n">now</span> <span class="n">we</span> <span class="n">also</span> <span class="n">have</span> <span class="n">two</span> <span class="n">append</span><span class="o">/</span><span class="n">prepend</span> <span class="n">awesome</span> <span class="n">macros</span> 
<span class="p">;</span> <span class="n">to</span> <span class="n">speed</span> <span class="n">up</span> <span class="n">adding</span> <span class="n">hooooooks</span><span class="o">.</span>
<span class="p">;</span> <span class="n">see</span> <span class="n">how</span> <span class="n">it</span> <span class="n">goes</span>
<span class="p">(</span><span class="n">prepend</span> <span class="nb">print</span><span class="o">-</span><span class="nb">name</span>
  <span class="p">(</span><span class="nb">print</span> <span class="s2">"The following person is awesome:"</span><span class="p">))</span>

<span class="p">(</span><span class="nb">print</span><span class="o">-</span><span class="nb">name</span> <span class="s2">"Gilbert K. Chesterton"</span><span class="p">)</span>
</pre>
</div>


<p>This is like adding aspects to your clojure functions ! With no pointcuts  ?? :)</p>

<h3 id="existing-leiningen-plugins">Existing Leiningen Plugins</h3>

<p>This is not the end, Leiningen provides plugins for all your needs. Groovy, Hadoop, ... you name it. It should be in the Leiningen <a href="https://github.com/technomancy/leiningen/wiki/Plugins">plugins list</a></p>

<h3 id="writing-your-own-plugin-for-leiningen">Writing your own plugin for Leiningen</h3>

<p>Now if the above was not enough for your needs, here is how you create a plugin for your repetitive tasks.</p>

<p>Create a file under <em>src/leiningen</em> and add some clojure code:</p>

<div class="highlight">
<pre><span class="p">(</span><span class="n">ns</span> <span class="n">leiningen</span><span class="o">.</span><span class="n">todo</span><span class="p">)</span>

<span class="p">(</span><span class="n">defn</span> <span class="n">todo</span> <span class="o">[</span><span class="n">project</span> <span class="o">&amp;</span> <span class="n">args</span><span class="o">]</span> <span class="p">(</span><span class="n">println</span> <span class="s2">"Hello TODO!!"</span><span class="p">))</span>
</pre>
</div>


<p>Then a new task will be available to your current project.</p>

<p>To share the task with other, please have a look at <a href="http://nakkaya.com/2010/02/25/writing-leiningen-plugins-101/">writing leiningen plugins 101/</a></p>

<h3 id="clojure-contrib">Clojure Contrib</h3>

<p><a href="http://dev.clojure.org/display/doc/Clojure+Contrib">http://dev.clojure.org/display/doc/Clojure+Contrib</a></p>

<p>Clojure contrib used to be a set of namespaces that were adding some great syntaxic sugar to a bunch of every day tasks.
Now the jar file ended being over 2G :) big, and the core Clojure programmers decided to start making smaller projects.</p>

<p>Here is an example for parsing xml that takes an old example of parsing an XML RSS Feed, and make it work with today's Clojure 1.4 packaging.</p>

<p>Add this to your project.clj:
<code>
[org.clojure/data.zip "0.1.1"]
[org.clojure/data.xml "0.0.6"]
</code></p>

<div class="highlight">
<pre><span class="p">(</span><span class="nb">require</span> <span class="s1">'[clojure.xml :as xml])</span>
<span class="s1">(require '</span><span class="o">[</span><span class="n">clojure</span><span class="o">.</span><span class="n">zip</span> <span class="ss">:as</span> <span class="n">zip</span><span class="o">]</span><span class="p">)</span>
<span class="p">(</span><span class="n">use</span> <span class="s1">'clojure.pprint)</span>
<span class="s1">(use '</span><span class="n">clojure</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">zip</span><span class="o">.</span><span class="n">xml</span><span class="p">)</span>

<span class="p">(</span><span class="n">defn</span> <span class="n">parse</span><span class="o">-</span><span class="n">str</span> <span class="o">[</span><span class="n">s</span><span class="o">]</span>
    <span class="p">(</span><span class="n">zip</span><span class="o">/</span><span class="n">xml</span><span class="o">-</span><span class="n">zip</span> <span class="p">(</span><span class="n">xml</span><span class="o">/</span><span class="n">parse</span> <span class="p">(</span><span class="kp">new</span> <span class="n">org</span><span class="o">.</span><span class="n">xml</span><span class="o">.</span><span class="n">sax</span><span class="o">.</span><span class="n">InputSource</span>
                            <span class="p">(</span><span class="kp">new</span> <span class="n">java</span><span class="o">.</span><span class="n">io</span><span class="o">.</span><span class="n">StringReader</span> <span class="n">s</span><span class="p">)))))</span>
<span class="p">(</span><span class="n">defn</span> <span class="n">parse</span><span class="o">-</span><span class="n">file</span> <span class="o">[</span><span class="n">f</span><span class="o">]</span>
    <span class="p">(</span><span class="n">zip</span><span class="o">/</span><span class="n">xml</span><span class="o">-</span><span class="n">zip</span> <span class="p">(</span><span class="n">xml</span><span class="o">/</span><span class="n">parse</span> <span class="p">(</span><span class="kp">new</span> <span class="n">org</span><span class="o">.</span><span class="n">xml</span><span class="o">.</span><span class="n">sax</span><span class="o">.</span><span class="n">InputSource</span>
                            <span class="p">(</span><span class="kp">new</span> <span class="n">java</span><span class="o">.</span><span class="n">io</span><span class="o">.</span><span class="n">FileReader</span> <span class="n">f</span><span class="p">)))))</span>

<span class="p">(</span><span class="k">def</span> <span class="nf">atom1</span> <span class="p">(</span><span class="n">parse</span><span class="o">-</span><span class="n">str</span> <span class="s2">"&lt;?xml version='1.0' encoding='UTF-8'?&gt;</span>
<span class="s2">                      &lt;feed xmlns='http://www.w3.org/2005/Atom'&gt;</span>
<span class="s2">                        &lt;id&gt;tag:blogger.com,1999:blog-28403206&lt;/id&gt;</span>
<span class="s2">                        &lt;updated&gt;2008-02-14T08:00:58.567-08:00&lt;/updated&gt;</span>
<span class="s2">                        &lt;title type='text'&gt;n01senet&lt;/title&gt;</span>
<span class="s2">                        &lt;link rel='alternate' type='text/html' href='http://n01senet.blogspot.com/'/&gt;</span>
<span class="s2">                        &lt;entry&gt;</span>
<span class="s2">                          &lt;id&gt;1&lt;/id&gt;</span>
<span class="s2">                          &lt;published&gt;2008-02-13&lt;/published&gt;</span>
<span class="s2">                          &lt;title type='text'&gt;clojure is the best lisp yet&lt;/title&gt;</span>
<span class="s2">                          &lt;author&gt;&lt;name&gt;Chouser&lt;/name&gt;&lt;/author&gt;</span>
<span class="s2">                        &lt;/entry&gt;</span>
<span class="s2">                        &lt;entry&gt;</span>
<span class="s2">                          &lt;id&gt;2&lt;/id&gt;</span>
<span class="s2">                          &lt;published&gt;2008-02-07&lt;/published&gt;</span>
<span class="s2">                          &lt;title type='text'&gt;experimenting with vnc&lt;/title&gt;</span>
<span class="s2">                          &lt;author&gt;&lt;name&gt;agriffis&lt;/name&gt;&lt;/author&gt;</span>
<span class="s2">                        &lt;/entry&gt;</span>
<span class="s2">                      &lt;/feed&gt;</span>
<span class="s2">                      "</span><span class="p">))</span>

<span class="p">;(</span><span class="n">pprint</span> <span class="n">atom1</span><span class="p">)</span>
<span class="p">(</span><span class="n">xml</span><span class="o">-&gt;</span> <span class="n">atom1</span> <span class="ss">:entry</span> <span class="n">text</span><span class="p">)</span>
</pre>
</div>
    </div>
  </body>
</html>
